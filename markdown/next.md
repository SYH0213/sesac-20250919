# 다음 버전(v3.0)을 위한 기능 아이디어

## ✨ 핵심 목표: 에이전트(Agent) 기반의 동적 파이프라인 구축

**다음 버전에서 가장 우선적으로 고려할 핵심 아키텍처 변경 사항입니다.**

현재의 고정된 순서(LangGraph)를 따르는 파이프라인에서 벗어나, LLM이 스스로 생각하고 판단하는 '에이전트'를 도입합니다. 에이전트는 사용자의 질문을 분석하여, 미리 정의된 `PDF 검색`, `웹 검색`, `URL 읽기` 등의 '도구(Tool)'들을 가장 적합한 순서로 동적으로 호출하고 조합하여 답변을 생성합니다.

- **기대 효과:**
    - **유연성 극대화:** "PDF 내용과 최신 뉴스를 비교해줘" 와 같이 여러 도구가 필요한 복합적인 질문에 효과적으로 대응할 수 있습니다.
    - **확장성:** 새로운 기능을 '도구'로 추가하기만 하면 에이전트가 즉시 활용할 수 있어, 기능 확장이 매우 용이해집니다.
    - **지능적인 문제 해결:** 정해진 경로가 막혔을 때(예: PDF 검색 실패), 에이전트가 스스로 다른 도구(예: 웹 검색)를 사용하는 등 대안을 찾아 문제를 해결할 수 있습니다.

---

## 1. 메모리 및 대화 관리 개선

-   **대화 요약 메모리 도입:**
    -   현재는 대화가 길어지면 LLM의 컨텍스트 한계를 초과할 수 있습니다. 오래된 대화 내용을 자동으로 요약하여 메모리에 저장하는 `ConversationSummaryBufferMemory` 같은 기능을 도입하면, 무한히 긴 대화도 안정적으로 처리할 수 있습니다.

-   **영구적인 대화 기록:**
    -   사용자가 브라우저를 닫아도 대화 기록이 사라지지 않도록, 간단한 DB(SQLite 등)나 파일 기반으로 서버에 대화 내용을 저장하는 기능을 추가합니다. 사용자별 세션이나 ID를 통해 이전 대화를 이어갈 수 있습니다.

## 2. 문서 처리 및 소스 확장

-   **UI를 통한 파일 업로드:**
    -   현재 코드에 하드코딩된 PDF 경로 대신, 사용자가 직접 웹 UI에서 원하는 PDF, TXT, DOCX 파일을 업로드하고 분석할 수 있도록 기능을 확장합니다.

-   **웹사이트 URL 직접 분석:**
    -   사용자가 제공한 웹사이트 URL의 내용을 직접 읽고 분석하여 답변을 생성하는 기능을 추가합니다. (현재의 웹 '검색' 기능과 다름)

-   **다중 문서 컬렉션 관리:**
    -   사용자가 여러 개의 문서 '컬렉션'(예: '프로젝트 A', '기술 문서')을 만들고, 대화 시 원하는 문서 컬렉션을 선택하여 RAG를 수행할 수 있는 관리 기능을 제공합니다.

## 3. RAG 파이프라인 고도화 (Advanced RAG)

-   **답변 후 재평가 (Re-ranking):**
    -   1차로 검색된 문서들을 더 정교한 모델(Cross-encoder 등)을 사용해 질문과의 관련도를 다시 한번 평가하고 순위를 매깁니다. 가장 관련도 높은 최상위 문서만 최종 답변 생성에 사용하여 정확도를 극대화합니다.

-   **질의 확장 (Query Expansion):**
    -   사용자의 질문을 바탕으로 LLM이 관련성이 높을 만한 여러 개의 추가 질문을 생성하고, 이 질문들을 함께 검색하여 더 풍부하고 정확한 컨텍스트를 확보합니다. (예: "RAG란?" → "RAG의 장점은?", "RAG의 단점은?")

## 4. 사용자 경험(UI/UX) 향상

-   **답변 실시간 스트리밍:**
    -   LLM이 답변을 생성하는 동안, 전체 답변이 완성될 때까지 기다리는 대신 생성되는 단어를 실시간으로 UI에 표시(스트리밍)하여 사용자가 느끼는 대기 시간을 줄입니다.

-   **참조 부분 하이라이팅:**
    -   챗봇이 답변을 생성할 때 참조한 문서의 특정 문단이나 문장을 UI에 시각적으로 하이라이팅하여, 답변의 근거를 명확하게 제시합니다.

-   **답변 피드백 기능:**
    -   각 답변에 '좋아요/싫어요' 같은 피드백 버튼을 추가하여, 사용자가 답변의 품질을 평가할 수 있도록 합니다. 이 피드백 데이터는 추후 모델 및 시스템 개선에 활용될 수 있습니다.

-   **대화 내용 내보내기:**
    -   현재까지의 대화 내용을 Markdown이나 텍스트 파일로 다운로드할 수 있는 기능을 추가합니다.

## 5. 답변 및 출력 기능 강화

-   **멀티모달(Multi-modal) 답변:**
    -   원본 PDF에 포함된 이미지나 표가 질문과 관련이 있을 경우, 해당 이미지나 표를 챗봇 답변에 직접 포함하여 시각적으로 보여줍니다.